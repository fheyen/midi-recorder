(this["webpackJsonpmidi-recorder"]=this["webpackJsonpmidi-recorder"]||[]).push([[0],{26:function(e,t,r){},33:function(e,t,r){},34:function(e,t,r){},35:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r(3),a=r.n(c),i=r(17),o=r.n(i),s=(r(26),r(6)),d=r.n(s),l=r(13),u=r(8),h=r(9),j=r(10),b=r(12),m=r(11),p=r(4),v=r(2),f=r(15),O=r(18),g=r(5),x=(r(33),function(e){Object(b.a)(r,e);var t=Object(m.a)(r);function r(e){var n;Object(u.a)(this,r),(n=t.call(this,e)).prepareDownload=function(){var e=n.state,t=e.date,r=e.name,c=e.prevNames,a=n.props,i=a.saveData,o=a.audioBlob,s=a.hideFileNamePrompt;c.includes(r)||""===r||(c.push(r),c.sort(),g.Utils.storeObjectInLocalStorage("previousNames",c));var d=g.Utils.formatDate(t),l="".concat(r,"_").concat(d,".json"),u=Object(f.a)(Object(f.a)({},i),{},{fileName:l,name:r,date:t});if(console.log(u),n.download(JSON.stringify(u),l),o){var h=o.type.split("/")[1].split(";")[0],j="".concat(r,"_").concat(d,".").concat(h);Object(O.saveAs)(o,j)}s()},n.download=function(e,t){var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},n.handleSearchEntry=function(e){var t=e.target.value.toLowerCase(),r=n.state.prevNames.filter((function(e){return e.toLowerCase().includes(t)}));n.setState({prevNamesFiltered:r,name:t})};var c=g.Utils.getObjectFromLocalStorage("previousNames")||[],a=new Date;return n.state={isRecording:!1,recordAudio:!0,date:a,name:"Unnamed ".concat(a.getTime()),prevNames:c,prevNamesFiltered:c},n}return Object(h.a)(r,[{key:"render",value:function(){var e=this,t=this.state,r=t.name,c=t.prevNamesFiltered;return Object(n.jsx)("div",{className:"FileNamePrompt",children:Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"nameInputDiv",children:Object(n.jsxs)("label",{children:["Name:\xa0",Object(n.jsx)("input",{className:"nameInput",type:"text",onChange:this.handleSearchEntry,value:r})]})}),Object(n.jsx)("div",{children:Object(n.jsxs)("button",{className:"downloadBtn",onClick:this.prepareDownload,children:[Object(n.jsx)(v.a,{icon:p.b,fixedWidth:!0}),"\xa0 Download"]})}),"Previous names:",Object(n.jsx)("div",{className:"prevNamesList",children:c.map((function(t){return Object(n.jsx)("span",{className:"prevName",onClick:function(){return e.setState({name:t})},children:t},t)}))})]})})}}]),r}(c.PureComponent)),N=(r(34),function(e){Object(b.a)(r,e);var t=Object(m.a)(r);function r(e){var n;return Object(u.a)(this,r),(n=t.call(this,e)).startRecording=function(){console.log("Starting recording");var e=n.state,t=e.midiRecorder,r=e.audioRecorder,c=e.recordAudio;t?(n.setState({isRecording:!0}),t.start(),c&&r&&r.start()):alert("Cannot record MIDI, no access to device!")},n.stopRecording=function(){return n.setState({isRecording:!1},(function(){return n.finishRecording(Object(j.a)(n))}))},n.hideFileNamePrompt=function(){return n.setState({showFileNamePrompt:!1})},n.toggleAudioRecording=function(){var e=!n.state.recordAudio;g.Utils.storeObjectInLocalStorage("recordAudio",e),n.setState({recordAudio:e})},n.state={isRecording:!1,recordAudio:g.Utils.getObjectFromLocalStorage("recordAudio")||!1,showFileNamePrompt:!1,midiRecorder:null,audioRecorder:null},n}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=this,e.next=4,Object(g.recordMidi)();case 4:e.t1=e.sent,e.t2={midiRecorder:e.t1},e.t0.setState.call(e.t0,e.t2),console.log("MIDI access sucessful"),e.next=13;break;case 10:e.prev=10,e.t3=e.catch(0),console.log(e.t3);case 13:return e.prev=13,e.t4=this,e.next=17,Object(g.recordAudio)();case 17:e.t5=e.sent,e.t6={audioRecorder:e.t5},e.t4.setState.call(e.t4,e.t6),console.log("Audio access sucessful"),e.next=26;break;case 23:e.prev=23,e.t7=e.catch(13),console.log(e.t7);case 26:case"end":return e.stop()}}),e,this,[[0,10],[13,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"finishRecording",value:function(){var e=Object(l.a)(d.a.mark((function e(t){var r,n,c,a,i,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.state,n=r.midiRecorder,c=r.audioRecorder,a=r.recordAudio,console.log("Stopping recording"),i=null,!a||!c){e.next=7;break}return e.next=6,c.stop();case 6:i=e.sent;case 7:if((o=n.stop())&&0!==o.length){e.next=11;break}if(window.confirm("No MIDI notes where recorded, save anyways?")){e.next=11;break}return e.abrupt("return");case 11:s={notes:o,speed:1,selectedTrack:0,timeSelection:null},this.setState({showFileNamePrompt:!0,saveData:s,audioBlob:i});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.isRecording,r=e.recordAudio,c=e.midiRecorder,a=e.audioRecorder,i=e.showFileNamePrompt,o=e.saveData,s=e.audioBlob;return Object(n.jsxs)("div",{className:"Toolbar",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("button",{title:"Start recording",onClick:this.startRecording,disabled:t,children:[Object(n.jsx)("span",{style:{color:"rgb(175, 0, 0)"},children:Object(n.jsx)(v.a,{icon:p.a,fixedWidth:!0})}),"Start recording"]}),Object(n.jsxs)("button",{title:"Finish recording",onClick:this.stopRecording,disabled:!t,children:[Object(n.jsx)(v.a,{icon:p.e,fixedWidth:!0}),"Finish recording"]})]}),Object(n.jsx)("div",{children:Object(n.jsxs)("button",{onClick:this.toggleAudioRecording,disabled:t,children:[Object(n.jsx)(v.a,{icon:r?p.h:p.g,fixedWidth:!0}),"\xa0 Record audio"]})}),Object(n.jsxs)("div",{children:[!c&&Object(n.jsxs)("span",{className:"fa-layers fa-fw",style:{verticalAlign:"middle"},title:"No MIDI access, cannot record anything! Connect device and reload page",children:[Object(n.jsx)(v.a,{icon:p.d,fixedWidth:!0}),Object(n.jsx)(v.a,{icon:p.f,fixedWidth:!0})]}),!a&&Object(n.jsxs)("span",{title:"No microphone access, cannot record audio! Connect device and reload page",children:["\xa0",Object(n.jsx)(v.a,{icon:p.c,fixedWidth:!0})]})]}),i&&Object(n.jsx)(x,{saveData:o,audioBlob:s,hideFileNamePrompt:this.hideFileNamePrompt})]})}}]),r}(c.PureComponent)),w=r(19);var R=function(){return Object(n.jsxs)("div",{className:"App bright",children:[Object(n.jsx)(N,{}),Object(n.jsx)("div",{className:"githubLink",children:Object(n.jsxs)("a",{href:"https://github.com/fheyen/midi-recorder",children:[Object(n.jsx)(v.a,{icon:w.a}),"\xa0 https://github.com/fheyen/midi-recorder"]})})]})};o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(R,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.63321d5b.chunk.js.map